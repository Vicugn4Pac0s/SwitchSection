!function(){"use strict";function e(e){return e.getBoundingClientRect().top+window.pageYOffset}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners={}}var n,r;return n=e,(r=[{key:"on",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"trigger",value:function(e,t){if(this.listeners[e])for(var n=this.listeners[e],r=0,i=n.length;r<i;r++){var s=n[r];"function"==typeof s&&s(t)}}}])&&t(n.prototype,r),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=this;r.Observer=new n,Array.isArray(e)?(r.selectors=[],e.forEach((function(e){r.selectors.push(document.getElementById(e))}))):r.selectors=document.getElementById(e).children,r.current_section=null,r.before_section=null,r.reset(),r.events()}var i,s;return i=t,(s=[{key:"on",value:function(e,t){switch(e){case"switch":this.Observer.on("switch",t.bind(this));break;case"onBefore":this.Observer.on("onBefore",t.bind(this));break;case"onAfter":this.Observer.on("onAfter",t.bind(this));break;default:console.log("Error")}}},{key:"switch",value:function(){this.scrollevent()}},{key:"reset",value:function(){var t=this;t.sections=[],Array.prototype.forEach.call(t.selectors,(function(n,r){t.sections.push({$_element:n,index:r,id:"section_"+r,name:n.dataset.name||"section_"+r,target:n.dataset.target||null,first:e(n),end:e(n)+n.clientHeight})}))}},{key:"update",value:function(){this.sections.forEach((function(t){t.first=e(t.$_element),t.end=e(t.$_element)+t.$_element.clientHeight}))}},{key:"events",value:function(){var e=this;window.addEventListener("scroll",(function(t){e.update(),e.scrollevent()}))}},{key:"scrollevent",value:function(){var e=this,t=window.pageYOffset+window.innerHeight/2,n=0,r=e.sections.length;e.sections.forEach((function(i){if(0===n&&i.first>=t){if("is-before-section"===e.current_section)return;e.before_section=e.current_section,e.current_section="is-before-section",e.Observer.trigger("onBefore",{})}if(n===r-1&&t>i.end){if("is-after-section"===e.current_section)return;e.before_section=e.current_section,e.current_section="is-after-section",e.Observer.trigger("onAfter",{})}if(n++,i.first<t&&t<=i.end){if(e.current_section===i.name)return;e.before_section=e.current_section,e.current_section=i.name,e.Observer.trigger("switch",{$_element:i.$_element,index:i.index,id:i.id,current_section:e.current_section,before_section:e.before_section,target:i.target})}}))}}])&&r(i.prototype,s),t}();window.SwitchSection=i}();