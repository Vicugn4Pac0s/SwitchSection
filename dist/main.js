!function(){"use strict";function e(e){return e.getBoundingClientRect().top+window.pageYOffset}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners={}}var n,i;return n=e,(i=[{key:"on",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"trigger",value:function(e,t){if(this.listeners[e])for(var n=this.listeners[e],i=0,r=n.length;i<r;i++){var s=n[i];"function"==typeof s&&s(t)}}}])&&t(n.prototype,i),e}();function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=this;i.Observer=new n,Array.isArray(e)?(i.selectors=[],e.forEach((function(e){i.selectors.push(document.getElementById(e))}))):i.selectors=document.getElementById(e).children,i.current_section=null,i.before_section=null,i.reset(),i.events()}var r,s;return r=t,(s=[{key:"on",value:function(e,t){switch(e){case"switch":this.Observer.on("switch",t.bind(this)),this.scrollevent();break;default:console.log("Error")}}},{key:"reset",value:function(){var t=this;t.sections=[],Array.prototype.forEach.call(t.selectors,(function(n,i){t.sections.push({$_element:n,index:i,id:"section_"+i,name:n.dataset.name||"section_"+i,target:n.dataset.target||null,first:e(n),end:e(n)+n.clientHeight})}))}},{key:"update",value:function(){this.sections.forEach((function(t){t.first=e(t.$_element),t.end=e(t.$_element)+t.$_element.clientHeight}))}},{key:"events",value:function(){var e=this;window.addEventListener("scroll",(function(t){e.update(),e.scrollevent()}))}},{key:"scrollevent",value:function(){var e=this,t=window.pageYOffset+window.innerHeight/2;e.sections.forEach((function(n){if(n.first<t&&t<=n.end){if(e.current_section===n.name)return;e.before_section=e.current_section,e.current_section=n.name,e.Observer.trigger("switch",{$_element:n.$_element,index:n.index,id:n.id,current_section:e.current_section,before_section:e.before_section,target:n.target})}}))}}])&&i(r.prototype,s),t}();window.SwitchSection=r}();